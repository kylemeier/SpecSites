(function(){$(function(){var e=0,t=["translateX","translateY","opacity","rotate","scale","skew"];$doc=$(document),$window=$(window),$body=$("body"),$html=$("html"),wrappers=[],currentWrapper=null,bodyHeight=0,windowHeight=0,windowWidth=0,prevKeyframesDurations=0,scrollTop=0,relativeScrollTop=0,currentKeyframe=0,keyframes=[{wrapper:"#intro",duration:1e3,animations:[{element:".first-line",translateY:-1,opacity:0},{element:".second-line",translateY:-0.5,opacity:0,rotate:180}]},{wrapper:"#second-section",duration:1e3,animations:[{element:".square",translateY:10},{element:".triangle-small-1",translateY:10,rotate:[-45,-45]},{element:".triangle-small-2",translateY:10,rotate:[180,180]},{element:".triangle-medium",translateY:10},{element:".triangle-large-1",translateY:10,rotate:[-135,-135]},{element:".triangle-large-2",translateY:10,rotate:[135,135]},{element:".parallelogram",translateY:10,rotate:[270,270]}]},{wrapper:"#second-section",duration:1500,animations:[{element:".square",translateY:[10,10],opacity:1},{element:".triangle-small-1",translateY:[10,10],opacity:1},{element:".triangle-small-2",translateY:[10,10],opacity:1,rotate:[180,180]},{element:".triangle-medium",translateY:[10,10],opacity:1},{element:".triangle-large-1",translateY:[10,10],opacity:1,rotate:[180,180]},{element:".triangle-large-2",translateY:[10,10],translateX:-2,rotate:-90},{element:".parallelogram",translateY:[10,10],rotate:[180,180]}]}];init=function(){scrollIntervalID=setInterval(updatePage,10);setupValues();$window.resize(resizeHandler)};getDefaultPropertyValue=function(e){switch(e){case"translateX":return 0;case"translateY":return 0;case"opacity":return 1;case"rotate":return 0;case"scale":return 1;case"skew":return 0;default:return null}};updatePage=function(){window.requestAnimationFrame(function(){setScrollTops();if(scrollTop>=0&&scrollTop<=bodyHeight-windowHeight){animateElements();setKeyframe()}})};setupValues=function(){windowHeight=$(window).height();windowWidth=$(window).width();buildPage()};buildPage=function(){var e,t;for(var n=0;n<keyframes.length;n++){bodyHeight+=keyframes[n].duration;$.inArray(keyframes[n].wrapper,wrappers)===-1&&wrappers.push(keyframes[n].wrapper);for(var r=0;r<keyframes[n].animations.length;r++)for(key in keyframes[n].animations[r]){e=keyframes[n].animations[r][key];if(key!=="element"&&e instanceof Array==0){t=[];t.push(getDefaultPropertyValue(key),e);e=t}keyframes[n].animations[r][key]=e}}$body.height(bodyHeight);setTimeout(function(){$window.scrollTop(0)},100);currentWrapper=wrappers[0];$(currentWrapper).show()};setScrollTops=function(){$window.scrollTop()<0&&$window.scrollTop(0);scrollTop=$window.scrollTop();relativeScrollTop=scrollTop-prevKeyframesDurations};animateElements=function(){var e,t,n,r,i,s,o;for(var u=0;u<keyframes[currentKeyframe].animations.length;u++){e=keyframes[currentKeyframe].animations[u];t=calcValue(e,"translateY");n=calcValue(e,"translateX");r=calcValue(e,"scale");i=calcValue(e,"rotate");s=calcValue(e,"skew");o=calcValue(e,"opacity");$(e.element).css({transform:"translate3d("+n+"em, "+t+"em, 0) scale("+r+") rotate("+i+"deg) skew("+s+"deg)",opacity:o})}};calcValue=function(e,t){var n=e[t];n?n=easeInOutQuad(relativeScrollTop,n[0],n[1]-n[0],keyframes[currentKeyframe].duration):n=getDefaultPropertyValue(t);return n};easeInOutQuad=function(e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t};setKeyframe=function(){if(scrollTop>keyframes[currentKeyframe].duration+prevKeyframesDurations){prevKeyframesDurations+=keyframes[currentKeyframe].duration;currentKeyframe++;showCurrentWrappers()}else if(scrollTop<prevKeyframesDurations){currentKeyframe--;prevKeyframesDurations-=keyframes[currentKeyframe].duration;showCurrentWrappers()}};showCurrentWrappers=function(){var e;if(keyframes[currentKeyframe].wrapper!=currentWrapper){$(currentWrapper).hide();$(keyframes[currentKeyframe].wrapper).show();currentWrapper=keyframes[currentKeyframe].wrapper}};resizeHandler=function(){};init()})}).call(this);